[
    {
        "rel_file_path": "sphinx/ext/mathjax.py",
        "abs_file_path": "/home/kimnal0/auto-code-rover/SWE-bench/testbed/sphinx-doc__sphinx/setup_sphinx-doc__sphinx__4.0/sphinx/ext/mathjax.py",
        "start": 70,
        "end": 88,
        "class_name": null,
        "method_name": "install_mathjax",
        "code": "70 def install_mathjax(app: Sphinx, env: BuildEnvironment) -> None:\n71     if app.builder.format != 'html' or app.builder.math_renderer_name != 'mathjax':  # type: ignore  # NOQA\n72         return\n73     if not app.config.mathjax_path:\n74         raise ExtensionError('mathjax_path config value must be set for the '\n75                              'mathjax extension to work')\n76 \n77     builder = cast(StandaloneHTMLBuilder, app.builder)\n78     domain = cast(MathDomain, env.get_domain('math'))\n79     if domain.has_equations():\n80         # Enable mathjax only if equations exists\n81         options = {'async': 'async'}\n82         if app.config.mathjax_options:\n83             options.update(app.config.mathjax_options)\n84         builder.add_js_file(app.config.mathjax_path, **options)\n85 \n86         if app.config.mathjax_config:\n87             body = \"MathJax.Hub.Config(%s)\" % json.dumps(app.config.mathjax_config)\n88             builder.add_js_file(None, type=\"text/x-mathjax-config\", body=body)\n",
        "intended_behavior": "This function needs to be updated to: Load the MathJax 3.0 script using the new URL structure provided by MathJax 3.0 documentation. Adjustments to how the script URL is defined will be required to reflect changes in the hosting or library structure of MathJax 3.0. Update the configuration insertion method to comply with MathJax 3.0's API. Since MathJax 3.0 likely deprecated the `MathJax.Hub.Config` approach used in the `body` variable, this part should be aligned with the new configuration method which potentially involves a different syntax or even a different mechanism for injecting configuration scripts into the webpage. Ensure that any customization options provided by Sphinx to tweak MathJax settings are still applicable or clearly documented on how to transition them to the new version. This might involve mapping existing configuration options to their equivalents in MathJax 3.0 or providing guidance on handling any options that might have been removed or significantly changed. Maintaining compatibility with existing Sphinx projects should be considered, with clear documentation or migration help provided if certain MathJax settings need to be changed by the user."
    }
]