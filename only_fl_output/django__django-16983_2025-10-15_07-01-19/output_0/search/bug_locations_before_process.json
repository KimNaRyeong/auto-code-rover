[
    {
        "file": "django/contrib/admin/options.py",
        "class": "ModelAdmin",
        "method": "N/A",
        "intended_behavior": "Add a new method or enhance an existing system check within ModelAdmin to validate the use of filter_horizontal or filter_vertical. This new check should iterate over the model fields to identify any ManyToManyField using a custom through model if filter_horizontal or filter_vertical are configured. If such a case is detected, raise a system check error warning the developer that filter_horizontal and filter_vertical cannot be used with ManyToManyField instances that have a custom through model. This maintains existing functionality by introducing a validation step that improves developer awareness and debugging efficiency."
    },
    {
        "file": "django/db/models/fields/related.py",
        "class": "ManyToManyField",
        "method": "check",
        "intended_behavior": "Extend the check method of ManyToManyField to include a specific validation for its usage within admin class configurations that utilize filter_horizontal or filter_vertical. While it's not directly accessing the admin configurations in this layer, it can include a warning or documentation hint suggesting that developers ensure compatibility with filter_horizontal and filter_vertical when using a custom through model. This change would indirectly address the issue by guiding developers during model field configuration, although the primary solution would be more direct checks within the admin framework as specified in Bug Location 1."
    }
]