[
    {
        "rel_file_path": "seaborn/relational.py",
        "abs_file_path": "/home/kimnal0/auto-code-rover/SWE-bench/testbed/mwaskom__seaborn/setup_mwaskom__seaborn__0.12/seaborn/relational.py",
        "start": 730,
        "end": 770,
        "class_name": null,
        "method_name": "scatterplot",
        "code": "730 def scatterplot(\n731     data=None, *,\n732     x=None, y=None, hue=None, size=None, style=None,\n733     palette=None, hue_order=None, hue_norm=None,\n734     sizes=None, size_order=None, size_norm=None,\n735     markers=True, style_order=None,\n736     x_bins=None, y_bins=None,\n737     units=None, estimator=None, ci=95, n_boot=1000,\n738     alpha=None, x_jitter=None, y_jitter=None,\n739     legend=\"auto\", ax=None,\n740     **kwargs\n741 ):\n742 \n743     variables = _ScatterPlotter.get_semantics(locals())\n744     p = _ScatterPlotter(\n745         data=data, variables=variables,\n746         x_bins=x_bins, y_bins=y_bins,\n747         estimator=estimator, ci=ci, n_boot=n_boot,\n748         alpha=alpha, x_jitter=x_jitter, y_jitter=y_jitter, legend=legend,\n749     )\n750 \n751     p.map_hue(palette=palette, order=hue_order, norm=hue_norm)\n752     p.map_size(sizes=sizes, order=size_order, norm=size_norm)\n753     p.map_style(markers=markers, order=style_order)\n754 \n755     if ax is None:\n756         ax = plt.gca()\n757 \n758     if not p.has_xy_data:\n759         return ax\n760 \n761     p._attach(ax)\n762 \n763     # Other functions have color as an explicit param,\n764     # and we should probably do that here too\n765     color = kwargs.pop(\"color\", None)\n766     kwargs[\"color\"] = _default_color(ax.scatter, hue, color, kwargs)\n767 \n768     p.plot(ax, kwargs)\n769 \n770     return ax\n",
        "intended_behavior": "To resolve the issue, the scatterplot function needs to be adjusted to correctly handle categorical hue data when passed directly through g.map() on a PairGrid. This could include enhancing the logic that interprets the hue parameter to ensure it can handle both direct Series/dataframe column references and explicit categorical data passed as an argument. This functionality should preserve the existing ability to map aesthetics based on hues while ensuring that direct hue parameter assignments do not throw KeyError or TypeError exceptions, maintaining compatibility with various data inputs including categorical, numerical, and possibly missing data."
    }
]